<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Potentiometer Voltage Divider (Side-by-Side)</title>
<meta name="description" content="Interactive potentiometer voltage divider: dial + vertical schematic with adjustable Vcc, total resistance, wiper position, and ADC resolution." />
<style>
  :root{ --bg:#0f172a; --panel:#111827; --muted:#94a3b8; --text:#e5e7eb; --blue:#38bdf8; --orange:#fb923c; }
  *{ box-sizing:border-box }
  html,body{ height:100% }
  body{ margin:0; background:var(--bg); color:var(--text); font-family:system-ui,sans-serif; display:flex; justify-content:center }
  .wrap{ width:100%; max-width:1100px; padding:clamp(10px,2vw,18px) }
  .card{ background:var(--panel); border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,.45); padding:clamp(10px,2vw,18px) }
  h1{ margin:0 0 clamp(6px,1.2vw,10px) 0; text-align:center; font-size:clamp(18px,2.2vw,22px) }

  /* Diagrams side-by-side */
  .diagrams{ display:grid; gap:clamp(8px,1.8vw,16px); grid-template-columns:1fr 1fr; align-items:center }
  @media (max-width:760px){ .diagrams{ grid-template-columns:1fr } }
  svg{ width:100%; height:auto; overflow:visible }

  /* Centered slider at 75% width */
  .slider{ width:75%; margin:clamp(6px,1.2vw,10px) auto; }
  .slider label{ display:block; color:var(--muted); margin-bottom:4px; font-size:clamp(12px,1.6vw,14px) }
  .slider input[type=range]{ width:100% }

  /* Compact controls */
  .controls{ display:grid; gap:clamp(8px,1.2vw,12px); grid-template-columns:repeat(3,minmax(0,1fr)); margin-top:clamp(6px,1.2vw,10px) }
  @media (max-width:660px){ .controls{ grid-template-columns:1fr 1fr } }
  label{ color:var(--muted); font-size:clamp(12px,1.6vw,14px); margin-bottom:4px; display:block }
  input[type=number],select{ width:100%; padding:8px; border-radius:10px; border:1px solid rgba(148,163,184,.25); background:#0b1022; color:var(--text); font-size:clamp(12px,1.6vw,14px) }

  /* Key readouts */
  .tiles{ margin-top:clamp(8px,1.2vw,12px); display:grid; gap:clamp(8px,1.2vw,12px); grid-template-columns:repeat(4,minmax(0,1fr)) }
  @media (max-width:760px){ .tiles{ grid-template-columns:repeat(2,minmax(0,1fr)) } }
  .tile{ border:1px dashed rgba(148,163,184,.28); border-radius:12px; padding:8px; text-align:center }
  .sm{ color:var(--muted); font-size:clamp(11px,1.5vw,13px) }
  .big{ font-weight:700; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace; font-size:clamp(14px,2.2vw,18px) }
  .mono{ font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Potentiometer Voltage Divider (Vcc on Right)</h1>

    <div class="diagrams">
      <!-- Dial -->
      <svg id="dial" viewBox="0 0 320 210" preserveAspectRatio="xMidYMid meet" aria-label="Dial">
        <!-- arcs: blue = Rvcc (Vcc→wiper), orange = Rgnd (wiper→GND) -->
        <path id="arc-blue"   fill="none" stroke="var(--blue)"   stroke-width="18"></path>
        <path id="arc-orange" fill="none" stroke="var(--orange)" stroke-width="18"></path>
        <!-- wiper arm (center 160,115) -->
        <g id="wiper">
          <line id="wiperLine" x1="160" y1="115" x2="160" y2="42" stroke="#e5e7eb" stroke-width="4"></line>
          <circle cx="160" cy="115" r="7" fill="#e5e7eb"></circle>
        </g>
        <text x="300" y="123" text-anchor="middle" fill="#93c5fd" class="mono" font-size="12">5V</text>
        <text x="20"  y="123" text-anchor="middle" fill="#fca5a5" class="mono" font-size="12">GND</text>
      </svg>

      <!-- Vertical shorthand schematic (shorter body + shorter wiper) -->
      <svg id="schem" viewBox="0 0 420 210" preserveAspectRatio="xMidYMid meet" aria-label="Schematic">
        <!-- Vcc line -->
        <line x1="30" y1="54" x2="210" y2="54" stroke="#93c5fd" stroke-width="3"></line>
        <text x="24" y="58" text-anchor="end" fill="#93c5fd" class="mono" font-size="12">Vcc</text>

        <!-- Resistor body (height=120) -->
        <g transform="translate(210,54)">
          <rect x="-10" y="0" width="20" height="120" rx="10" fill="#0b1022" stroke="rgba(148,163,184,.6)"></rect>
          <path d="M0,0 l12,10 -12,10 12,10 -12,10 12,10 -12,10 12,10 -12,10 12,10 -12,10"
                stroke="#e5e7eb" stroke-width="2.1" fill="none"></path>

          <!-- Wiper (shorter) -->
          <g id="schemWiper" transform="translate(0,60)">
            <circle r="3.5" fill="#e5e7eb"></circle>
            <line x1="0" y1="0" x2="120" y2="0" stroke="#93c5fd" stroke-width="3"></line>
            <path d="M8 -6 L0 0 L8 6" fill="#93c5fd"></path>
            <text x="126" y="4" fill="#93c5fd" class="mono" font-size="12">Output → A0</text>
          </g>

          <!-- GND marker -->
          <line x1="0" y1="120" x2="0" y2="144" stroke="#fca5a5" stroke-width="3"></line>
          <text x="-18" y="162" fill="#fca5a5" class="mono" font-size="12" text-anchor="end">GND</text>

          <!-- Clean value labels with subscripts -->
            <text id="lblRvcc" x="-12" y="-10" text-anchor="end" fill="#93c5fd" class="mono" font-size="13">
            R<tspan baseline-shift="sub">Vcc</tspan>: <tspan id="valRvcc"></tspan>
          </text>
          <text id="lblRgnd" x="-12" y="178"  text-anchor="end" fill="#fca5a5" class="mono" font-size="13">
            R<tspan baseline-shift="sub">GND</tspan>: <tspan id="valRgnd"></tspan>
          </text>
        </g>
      </svg>
    </div>

    <!-- Centered slider (75% width) directly under diagrams -->
    <div class="slider">
      <label for="pos">Wiper Position (% from GND side)</label>
      <input id="pos" type="range" min="0" max="100" value="50">
    </div>

    <!-- Compact controls -->
    <div class="controls">
      <div>
        <label for="vin">Vcc (V)</label>
        <input id="vin" type="number" step="0.1" value="5">
      </div>
      <div>
        <label for="rtot">Potentiometer Value (Ω)</label>
        <input id="rtot" type="number" step="100" value="10000">
      </div>
      <div>
        <label for="bits">ADC Resolution (bits)</label>
        <select id="bits"><option>8</option><option selected>10</option><option>12</option><option>16</option></select>
      </div>
    </div>

    <!-- Key readouts -->
    <div class="tiles">
      <div class="tile"><div class="sm">R<sub>Vcc</sub> (Vcc→wiper)</div><div id="rVcc" class="big">—</div></div>
      <div class="tile"><div class="sm">R<sub>GND</sub> (wiper→GND)</div><div id="rGnd" class="big">—</div></div>
      <div class="tile"><div class="sm">V<sub>out</sub> (wiper)</div><div id="vOut" class="big">—</div></div>
      <div class="tile"><div class="sm">analogRead()</div><div id="adc" class="big">—</div></div>
    </div>
  </div>
</div>

<script>
  // Inputs/outputs
  const posEl  = document.getElementById('pos');
  const vinEl  = document.getElementById('vin');
  const rtotEl = document.getElementById('rtot');
  const bitsEl = document.getElementById('bits');

  const rVccEl = document.getElementById('rVcc');
  const rGndEl = document.getElementById('rGnd');
  const vOutEl = document.getElementById('vOut');
  const adcEl  = document.getElementById('adc');

  // Dial parts
  const arcBlue   = document.getElementById('arc-blue');
  const arcOrange = document.getElementById('arc-orange');
  const wiperLine = document.getElementById('wiperLine');

  // Schematic parts
  const schemWiper = document.getElementById('schemWiper');
  const valRvcc    = document.getElementById('valRvcc');
  const valRgnd    = document.getElementById('valRgnd');

  // Dial geometry (center 160,115)
  const R = 68, START_DEG = 180, SPAN_DEG = 180;

  function toRad(d){ return d*Math.PI/180; }
  function pol2xy(r,deg){ return { x:160 + r*Math.cos(toRad(deg)), y:115 + r*Math.sin(toRad(deg)) }; }
  function arcPath(r,a0,a1){
    const p0=pol2xy(r,a0), p1=pol2xy(r,a1);
    const large=Math.abs(a1-a0)>180?1:0, sweep=a1>a0?1:0;
    return `M ${p0.x} ${p0.y} A ${r} ${r} 0 ${large} ${sweep} ${p1.x} ${p1.y}`;
  }
  function fmtOhm(x){
    if(!isFinite(x)) return '—';
    if(x>=1e6) return (x/1e6).toFixed(2)+' MΩ';
    if(x>=1e3) return (x/1e3).toFixed(2)+' kΩ';
    return x.toFixed(0)+' Ω';
  }

  function update(){
    const pos  = Math.min(100, Math.max(0, parseFloat(posEl.value)||0)); // % from GND
    const Vin  = parseFloat(vinEl.value) || 0;
    const Rtot = Math.max(1, parseFloat(rtotEl.value) || 10000);
    const bits = parseInt(bitsEl.value,10) || 10;

    const f    = pos/100;         // 0..1 (GND→Vcc)
    const Rvcc = Rtot*(1 - f);    // Vcc→wiper  (blue)
    const Rgnd = Rtot*f;          // wiper→GND  (orange)
    const Vw   = Vin * f;
    const maxC = Math.pow(2,bits)-1;
    const adc  = Math.round((Vin?Vw/Vin:0)*maxC);

    // Readouts
    rVccEl.textContent = fmtOhm(Rvcc);
    rGndEl.textContent = fmtOhm(Rgnd);
    vOutEl.textContent = Vw.toFixed(3)+' V';
    adcEl.textContent  = `${adc} / ${maxC}`;

    // Dial arcs & wiper
    const aStart=START_DEG, aMid=START_DEG+SPAN_DEG*f, aEnd=START_DEG+SPAN_DEG;
    arcBlue.setAttribute('d',   arcPath(R, aMid, aEnd));   // Rvcc
    arcOrange.setAttribute('d', arcPath(R, aStart, aMid)); // Rgnd
    const p = pol2xy(R,aMid);
    wiperLine.setAttribute('x2', p.x);
    wiperLine.setAttribute('y2', p.y);

    // Vertical schematic: height H=120; 0 at top
    // Slider all the way LEFT (f=0) → wiper at BOTTOM → y=H
    const H = 120;
    const y = H * (1 - f);
    schemWiper.setAttribute('transform', `translate(0,${y})`);

    // Labels
    valRvcc.textContent = fmtOhm(Rvcc);
    valRgnd.textContent = fmtOhm(Rgnd);
  }

  [posEl, vinEl, rtotEl, bitsEl].forEach(el => el.addEventListener('input', update));
  update();
</script>
</body>
</html>
